<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "7c077988328ebfe33b24d07945f16eca",
  "translation_date": "2025-09-05T11:46:24+00:00",
  "source_file": "2-Regression/2-Data/README.md",
  "language_code": "sl"
}
-->
# Ustvarjanje regresijskega modela s Scikit-learn: priprava in vizualizacija podatkov

![Infografika vizualizacije podatkov](../../../../2-Regression/2-Data/images/data-visualization.png)

Infografika avtorja [Dasani Madipalli](https://twitter.com/dasani_decoded)

## [Predavanje kviz](https://ff-quizzes.netlify.app/en/ml/)

> ### [To lekcijo lahko najdete tudi v jeziku R!](../../../../2-Regression/2-Data/solution/R/lesson_2.html)

## Uvod

Zdaj, ko imate na voljo orodja za gradnjo modelov strojnega uƒçenja s Scikit-learn, ste pripravljeni zaƒçeti postavljati vpra≈°anja svojim podatkom. Pri delu s podatki in uporabi re≈°itev strojnega uƒçenja je zelo pomembno, da znate postaviti prava vpra≈°anja, da lahko pravilno izkoristite potenciale svojega nabora podatkov.

V tej lekciji boste spoznali:

- Kako pripraviti podatke za gradnjo modela.
- Kako uporabiti Matplotlib za vizualizacijo podatkov.

## Postavljanje pravih vpra≈°anj svojim podatkom

Vpra≈°anje, na katerega ≈æelite odgovor, bo doloƒçilo, katere vrste algoritmov strojnega uƒçenja boste uporabili. Kakovost odgovora pa bo moƒçno odvisna od narave va≈°ih podatkov.

Oglejte si [podatke](https://github.com/microsoft/ML-For-Beginners/blob/main/2-Regression/data/US-pumpkins.csv), ki so na voljo za to lekcijo. Datoteko .csv lahko odprete v programu VS Code. Hiter pregled takoj poka≈æe, da so prisotne prazne vrednosti ter me≈°anica nizov in ≈°tevilskih podatkov. Obstaja tudi nenavaden stolpec z imenom 'Package', kjer so podatki me≈°anica 'sacks', 'bins' in drugih vrednosti. Podatki so pravzaprav precej neurejeni.

[![ML za zaƒçetnike - Kako analizirati in oƒçistiti nabor podatkov](https://img.youtube.com/vi/5qGjczWTrDQ/0.jpg)](https://youtu.be/5qGjczWTrDQ "ML za zaƒçetnike - Kako analizirati in oƒçistiti nabor podatkov")

> üé• Kliknite zgornjo sliko za kratek video o pripravi podatkov za to lekcijo.

Pravzaprav ni pogosto, da dobite nabor podatkov, ki je popolnoma pripravljen za ustvarjanje modela strojnega uƒçenja. V tej lekciji se boste nauƒçili, kako pripraviti surove podatke z uporabo standardnih knji≈ænic za Python. Spoznali boste tudi razliƒçne tehnike za vizualizacijo podatkov.

## ≈†tudija primera: 'trg buƒç'

V tej mapi boste na≈°li datoteko .csv v korenski mapi `data`, imenovano [US-pumpkins.csv](https://github.com/microsoft/ML-For-Beginners/blob/main/2-Regression/data/US-pumpkins.csv), ki vkljuƒçuje 1757 vrstic podatkov o trgu buƒç, razvr≈°ƒçenih po mestih. To so surovi podatki, pridobljeni iz [Specialty Crops Terminal Markets Standard Reports](https://www.marketnews.usda.gov/mnp/fv-report-config-step1?type=termPrice), ki jih distribuira Ministrstvo za kmetijstvo ZDA.

### Priprava podatkov

Ti podatki so v javni domeni. Na spletni strani USDA jih je mogoƒçe prenesti v ≈°tevilnih loƒçenih datotekah, po mestih. Da bi se izognili prevelikemu ≈°tevilu loƒçenih datotek, smo zdru≈æili vse podatke mest v eno preglednico, kar pomeni, da smo podatke ≈æe nekoliko _pripravili_. Zdaj si podrobneje oglejmo podatke.

### Podatki o buƒçah - prvi vtisi

Kaj opazite pri teh podatkih? ≈Ωe prej ste videli, da gre za me≈°anico nizov, ≈°tevil, praznih vrednosti in nenavadnih vrednosti, ki jih morate razumeti.

Katero vpra≈°anje lahko postavite tem podatkom z uporabo regresijske tehnike? Kaj pa "Napovedovanje cene buƒçe za prodajo v doloƒçenem mesecu"? ƒåe ponovno pogledate podatke, boste opazili, da morate narediti nekaj sprememb, da ustvarite strukturo podatkov, potrebno za to nalogo.

## Vaja - analiza podatkov o buƒçah

Uporabimo [Pandas](https://pandas.pydata.org/) (ime pomeni `Python Data Analysis`), zelo uporabno orodje za oblikovanje podatkov, za analizo in pripravo teh podatkov o buƒçah.

### Najprej preverite manjkajoƒçe datume

Najprej boste morali preveriti, ali manjkajo datumi:

1. Pretvorite datume v meseƒçni format (to so datumi iz ZDA, zato je format `MM/DD/YYYY`).
2. Izlu≈°ƒçite mesec v nov stolpec.

Odprite datoteko _notebook.ipynb_ v Visual Studio Code in uvozite preglednico v nov Pandas dataframe.

1. Uporabite funkcijo `head()`, da si ogledate prvih pet vrstic.

    ```python
    import pandas as pd
    pumpkins = pd.read_csv('../data/US-pumpkins.csv')
    pumpkins.head()
    ```

    ‚úÖ Katero funkcijo bi uporabili za ogled zadnjih petih vrstic?

1. Preverite, ali v trenutnem dataframeu manjkajo podatki:

    ```python
    pumpkins.isnull().sum()
    ```

    Manjkajo podatki, vendar morda to ne bo pomembno za nalogo.

1. Da bo va≈° dataframe la≈æji za delo, izberite samo stolpce, ki jih potrebujete, z uporabo funkcije `loc`, ki iz izvirnega dataframea izlu≈°ƒçi skupino vrstic (podanih kot prvi parameter) in stolpcev (podanih kot drugi parameter). Izraz `:` v spodnjem primeru pomeni "vse vrstice".

    ```python
    columns_to_select = ['Package', 'Low Price', 'High Price', 'Date']
    pumpkins = pumpkins.loc[:, columns_to_select]
    ```

### Drugiƒç, doloƒçite povpreƒçno ceno buƒçe

Razmislite, kako doloƒçiti povpreƒçno ceno buƒçe v doloƒçenem mesecu. Katere stolpce bi izbrali za to nalogo? Namig: potrebovali boste 3 stolpce.

Re≈°itev: vzemite povpreƒçje stolpcev `Low Price` in `High Price`, da napolnite nov stolpec Price, in pretvorite stolpec Date, da prika≈æe samo mesec. Na sreƒço, glede na zgornjo preverbo, ni manjkajoƒçih podatkov za datume ali cene.

1. Za izraƒçun povpreƒçja dodajte naslednjo kodo:

    ```python
    price = (pumpkins['Low Price'] + pumpkins['High Price']) / 2

    month = pd.DatetimeIndex(pumpkins['Date']).month

    ```

   ‚úÖ Po ≈æelji natisnite katerikoli podatek, ki ga ≈æelite preveriti, z uporabo `print(month)`.

2. Zdaj kopirajte pretvorjene podatke v nov Pandas dataframe:

    ```python
    new_pumpkins = pd.DataFrame({'Month': month, 'Package': pumpkins['Package'], 'Low Price': pumpkins['Low Price'],'High Price': pumpkins['High Price'], 'Price': price})
    ```

    ƒåe natisnete svoj dataframe, boste videli ƒçist, urejen nabor podatkov, na katerem lahko gradite svoj novi regresijski model.

### Ampak poƒçakajte! Nekaj je ƒçudnega

ƒåe pogledate stolpec `Package`, so buƒçe prodane v razliƒçnih konfiguracijah. Nekatere so prodane v '1 1/9 bushel' enotah, nekatere v '1/2 bushel' enotah, nekatere na buƒço, nekatere na funt, in nekatere v velikih ≈°katlah razliƒçnih ≈°irin.

> Zdi se, da je buƒçe zelo te≈æko dosledno tehtati

ƒåe se poglobite v izvirne podatke, je zanimivo, da imajo vse enote z `Unit of Sale` enako 'EACH' ali 'PER BIN' tudi vrsto `Package` na palec, na bin ali 'each'. Zdi se, da je buƒçe zelo te≈æko dosledno tehtati, zato jih filtrirajmo tako, da izberemo samo buƒçe z nizom 'bushel' v njihovem stolpcu `Package`.

1. Dodajte filter na vrhu datoteke, pod zaƒçetnim uvozom .csv:

    ```python
    pumpkins = pumpkins[pumpkins['Package'].str.contains('bushel', case=True, regex=True)]
    ```

    ƒåe zdaj natisnete podatke, lahko vidite, da dobite le pribli≈æno 415 vrstic podatkov, ki vsebujejo buƒçe po buslju.

### Ampak poƒçakajte! ≈†e nekaj je treba narediti

Ste opazili, da se koliƒçina buslja razlikuje po vrsticah? Potrebno je normalizirati cene, da prika≈æete cene na buselj, zato naredite nekaj izraƒçunov za standardizacijo.

1. Dodajte te vrstice po bloku, ki ustvarja dataframe new_pumpkins:

    ```python
    new_pumpkins.loc[new_pumpkins['Package'].str.contains('1 1/9'), 'Price'] = price/(1 + 1/9)

    new_pumpkins.loc[new_pumpkins['Package'].str.contains('1/2'), 'Price'] = price/(1/2)
    ```

‚úÖ Po podatkih [The Spruce Eats](https://www.thespruceeats.com/how-much-is-a-bushel-1389308) te≈æa buslja variira glede na vrsto pridelka, saj gre za meritev prostornine. "Buselj paradi≈ænikov, na primer, naj bi tehtal 56 funtov... Listi in zelenjava zavzamejo veƒç prostora z manj≈°o te≈æo, zato buselj ≈°pinaƒçe tehta le 20 funtov." Vse skupaj je precej zapleteno! Ne ukvarjajmo se s pretvorbo buslja v funte, ampak raje doloƒçimo ceno na buselj. Vse to prouƒçevanje busljev buƒç pa ka≈æe, kako zelo pomembno je razumeti naravo svojih podatkov!

Zdaj lahko analizirate cene na enoto glede na njihovo meritev buslja. ƒåe ≈°e enkrat natisnete podatke, lahko vidite, kako so standardizirani.

‚úÖ Ste opazili, da so buƒçe, prodane po pol buslja, zelo drage? Ali lahko ugotovite, zakaj? Namig: majhne buƒçe so veliko dra≈æje od velikih, verjetno zato, ker jih je veliko veƒç na buselj, glede na neizkori≈°ƒçen prostor, ki ga zavzame ena velika votla buƒça za pito.

## Strategije vizualizacije

Del naloge podatkovnega znanstvenika je prikazati kakovost in naravo podatkov, s katerimi dela. To pogosto dose≈æejo z ustvarjanjem zanimivih vizualizacij, kot so grafi, diagrami in tabele, ki prikazujejo razliƒçne vidike podatkov. Na ta naƒçin lahko vizualno prika≈æejo odnose in vrzeli, ki jih je sicer te≈æko odkriti.

[![ML za zaƒçetnike - Kako vizualizirati podatke z Matplotlib](https://img.youtube.com/vi/SbUkxH6IJo0/0.jpg)](https://youtu.be/SbUkxH6IJo0 "ML za zaƒçetnike - Kako vizualizirati podatke z Matplotlib")

> üé• Kliknite zgornjo sliko za kratek video o vizualizaciji podatkov za to lekcijo.

Vizualizacije lahko pomagajo tudi pri doloƒçanju tehnike strojnega uƒçenja, ki je najbolj primerna za podatke. Na primer, raztrosni diagram, ki sledi liniji, ka≈æe, da so podatki primerni za nalogo linearne regresije.

Ena od knji≈ænic za vizualizacijo podatkov, ki dobro deluje v Jupyterjevih bele≈ænicah, je [Matplotlib](https://matplotlib.org/) (ki ste jo videli tudi v prej≈°nji lekciji).

> Pridobite veƒç izku≈°enj z vizualizacijo podatkov v [teh vadnicah](https://docs.microsoft.com/learn/modules/explore-analyze-data-with-python?WT.mc_id=academic-77952-leestott).

## Vaja - eksperimentiranje z Matplotlib

Poskusite ustvariti osnovne grafe za prikaz novega dataframea, ki ste ga pravkar ustvarili. Kaj bi pokazal osnovni linijski graf?

1. Uvozite Matplotlib na vrhu datoteke, pod uvozom Pandas:

    ```python
    import matplotlib.pyplot as plt
    ```

1. Ponovno za≈æenite celotno bele≈ænico za osve≈æitev.
1. Na dnu bele≈ænice dodajte celico za prikaz podatkov kot ≈°katlasti graf:

    ```python
    price = new_pumpkins.Price
    month = new_pumpkins.Month
    plt.scatter(price, month)
    plt.show()
    ```

    ![Raztrosni diagram, ki prikazuje razmerje med ceno in mesecem](../../../../2-Regression/2-Data/images/scatterplot.png)

    Ali je ta graf uporaben? Vas kaj na njem preseneƒça?

    Ni posebej uporaben, saj le prikazuje razpr≈°enost toƒçk v doloƒçenem mesecu.

### Naredimo ga uporabnega

Da bi grafi prikazovali uporabne podatke, jih obiƒçajno morate nekako zdru≈æiti. Poskusimo ustvariti graf, kjer y-os prikazuje mesece, podatki pa prikazujejo porazdelitev podatkov.

1. Dodajte celico za ustvarjanje zdru≈æenega stolpƒçnega diagrama:

    ```python
    new_pumpkins.groupby(['Month'])['Price'].mean().plot(kind='bar')
    plt.ylabel("Pumpkin Price")
    ```

    ![Stolpƒçni diagram, ki prikazuje razmerje med ceno in mesecem](../../../../2-Regression/2-Data/images/barchart.png)

    To je bolj uporabna vizualizacija podatkov! Zdi se, da ka≈æe, da so najvi≈°je cene buƒç v septembru in oktobru. Ali to ustreza va≈°im priƒçakovanjem? Zakaj ali zakaj ne?

---

## üöÄIzziv

Razi≈°ƒçite razliƒçne vrste vizualizacij, ki jih ponuja Matplotlib. Katere vrste so najbolj primerne za regresijske probleme?

## [Kviz po predavanju](https://ff-quizzes.netlify.app/en/ml/)

## Pregled in samostojno uƒçenje

Oglejte si razliƒçne naƒçine vizualizacije podatkov. Naredite seznam razliƒçnih knji≈ænic, ki so na voljo, in zabele≈æite, katere so najbolj≈°e za doloƒçene vrste nalog, na primer 2D vizualizacije v primerjavi s 3D vizualizacijami. Kaj odkrijete?

## Naloga

[Raziskovanje vizualizacije](assignment.md)

---

**Omejitev odgovornosti**:  
Ta dokument je bil preveden z uporabo storitve za strojno prevajanje [Co-op Translator](https://github.com/Azure/co-op-translator). ƒåeprav si prizadevamo za natanƒçnost, vas prosimo, da upo≈°tevate, da lahko avtomatizirani prevodi vsebujejo napake ali netoƒçnosti. Izvirni dokument v njegovem izvirnem jeziku je treba obravnavati kot avtoritativni vir. Za kljuƒçne informacije priporoƒçamo strokovno ƒçlove≈°ko prevajanje. Ne prevzemamo odgovornosti za morebitna nesporazumevanja ali napaƒçne razlage, ki izhajajo iz uporabe tega prevoda.