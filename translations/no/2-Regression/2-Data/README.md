<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "7c077988328ebfe33b24d07945f16eca",
  "translation_date": "2025-09-05T21:16:31+00:00",
  "source_file": "2-Regression/2-Data/README.md",
  "language_code": "no"
}
-->
# Bygg en regresjonsmodell med Scikit-learn: forbered og visualiser data

![Infografikk for datavisualisering](../../../../2-Regression/2-Data/images/data-visualization.png)

Infografikk av [Dasani Madipalli](https://twitter.com/dasani_decoded)

## [Quiz fÃ¸r forelesning](https://ff-quizzes.netlify.app/en/ml/)

> ### [Denne leksjonen er tilgjengelig i R!](../../../../2-Regression/2-Data/solution/R/lesson_2.html)

## Introduksjon

NÃ¥ som du har satt opp verktÃ¸yene du trenger for Ã¥ begynne Ã¥ bygge maskinlÃ¦ringsmodeller med Scikit-learn, er du klar til Ã¥ begynne Ã¥ stille spÃ¸rsmÃ¥l til dataene dine. NÃ¥r du jobber med data og bruker ML-lÃ¸sninger, er det svÃ¦rt viktig Ã¥ forstÃ¥ hvordan du stiller de riktige spÃ¸rsmÃ¥lene for Ã¥ utnytte potensialet i datasettet ditt.

I denne leksjonen vil du lÃ¦re:

- Hvordan forberede dataene dine for modellbygging.
- Hvordan bruke Matplotlib til datavisualisering.

## Stille de riktige spÃ¸rsmÃ¥lene til dataene dine

SpÃ¸rsmÃ¥let du Ã¸nsker svar pÃ¥ vil avgjÃ¸re hvilken type ML-algoritmer du vil bruke. Og kvaliteten pÃ¥ svaret du fÃ¥r tilbake vil vÃ¦re sterkt avhengig av kvaliteten pÃ¥ dataene dine.

Ta en titt pÃ¥ [dataene](https://github.com/microsoft/ML-For-Beginners/blob/main/2-Regression/data/US-pumpkins.csv) som er gitt for denne leksjonen. Du kan Ã¥pne denne .csv-filen i VS Code. Et raskt blikk viser umiddelbart at det finnes tomme felter og en blanding av tekst og numeriske data. Det er ogsÃ¥ en merkelig kolonne kalt 'Package' hvor dataene er en blanding av 'sacks', 'bins' og andre verdier. Dataene er faktisk litt rotete.

[![ML for nybegynnere - Hvordan analysere og rense et datasett](https://img.youtube.com/vi/5qGjczWTrDQ/0.jpg)](https://youtu.be/5qGjczWTrDQ "ML for nybegynnere - Hvordan analysere og rense et datasett")

> ðŸŽ¥ Klikk pÃ¥ bildet over for en kort video som viser hvordan du forbereder dataene for denne leksjonen.

Det er faktisk ikke veldig vanlig Ã¥ fÃ¥ et datasett som er helt klart til bruk for Ã¥ lage en ML-modell rett ut av boksen. I denne leksjonen vil du lÃ¦re hvordan du forbereder et rÃ¥datasett ved hjelp av standard Python-biblioteker. Du vil ogsÃ¥ lÃ¦re ulike teknikker for Ã¥ visualisere dataene.

## Case-studie: 'gresskarmarkedet'

I denne mappen finner du en .csv-fil i rotmappen `data` kalt [US-pumpkins.csv](https://github.com/microsoft/ML-For-Beginners/blob/main/2-Regression/data/US-pumpkins.csv) som inneholder 1757 linjer med data om markedet for gresskar, sortert i grupper etter by. Dette er rÃ¥data hentet fra [Specialty Crops Terminal Markets Standard Reports](https://www.marketnews.usda.gov/mnp/fv-report-config-step1?type=termPrice) distribuert av United States Department of Agriculture.

### Forberede data

Disse dataene er i det offentlige domene. De kan lastes ned i mange separate filer, per by, fra USDA-nettstedet. For Ã¥ unngÃ¥ for mange separate filer har vi slÃ¥tt sammen alle bydataene til ett regneark, sÃ¥ vi har allerede _forberedt_ dataene litt. La oss nÃ¥ ta en nÃ¦rmere titt pÃ¥ dataene.

### Gresskardata - tidlige konklusjoner

Hva legger du merke til med disse dataene? Du har allerede sett at det er en blanding av tekst, tall, tomme felter og merkelige verdier som du mÃ¥ forstÃ¥.

Hvilket spÃ¸rsmÃ¥l kan du stille til disse dataene ved hjelp av en regresjonsteknikk? Hva med "Forutsi prisen pÃ¥ et gresskar som selges i lÃ¸pet av en gitt mÃ¥ned". NÃ¥r du ser pÃ¥ dataene igjen, er det noen endringer du mÃ¥ gjÃ¸re for Ã¥ skape den datastrukturen som er nÃ¸dvendig for oppgaven.

## Ã˜velse - analyser gresskardataene

La oss bruke [Pandas](https://pandas.pydata.org/), (navnet stÃ¥r for `Python Data Analysis`) et verktÃ¸y som er svÃ¦rt nyttig for Ã¥ forme data, til Ã¥ analysere og forberede disse gresskardataene.

### FÃ¸rst, sjekk for manglende datoer

Du mÃ¥ fÃ¸rst ta steg for Ã¥ sjekke for manglende datoer:

1. Konverter datoene til et mÃ¥nedsformat (disse er amerikanske datoer, sÃ¥ formatet er `MM/DD/YYYY`).
2. Ekstraher mÃ¥neden til en ny kolonne.

Ã…pne _notebook.ipynb_-filen i Visual Studio Code og importer regnearket til en ny Pandas dataframe.

1. Bruk funksjonen `head()` for Ã¥ se de fÃ¸rste fem radene.

    ```python
    import pandas as pd
    pumpkins = pd.read_csv('../data/US-pumpkins.csv')
    pumpkins.head()
    ```

    âœ… Hvilken funksjon ville du brukt for Ã¥ se de siste fem radene?

1. Sjekk om det er manglende data i den nÃ¥vÃ¦rende dataframen:

    ```python
    pumpkins.isnull().sum()
    ```

    Det er manglende data, men kanskje det ikke vil ha betydning for oppgaven.

1. For Ã¥ gjÃ¸re dataframen din enklere Ã¥ jobbe med, velg kun de kolonnene du trenger, ved Ã¥ bruke funksjonen `loc` som henter ut en gruppe rader (gitt som fÃ¸rste parameter) og kolonner (gitt som andre parameter) fra den originale dataframen. Uttrykket `:` i eksempelet nedenfor betyr "alle rader".

    ```python
    columns_to_select = ['Package', 'Low Price', 'High Price', 'Date']
    pumpkins = pumpkins.loc[:, columns_to_select]
    ```

### Deretter, bestem gjennomsnittsprisen pÃ¥ gresskar

Tenk pÃ¥ hvordan du kan bestemme gjennomsnittsprisen pÃ¥ et gresskar i en gitt mÃ¥ned. Hvilke kolonner ville du valgt for denne oppgaven? Hint: du trenger 3 kolonner.

LÃ¸sning: ta gjennomsnittet av kolonnene `Low Price` og `High Price` for Ã¥ fylle den nye kolonnen Price, og konverter Date-kolonnen til kun Ã¥ vise mÃ¥neden. Heldigvis, ifÃ¸lge sjekken ovenfor, er det ingen manglende data for datoer eller priser.

1. For Ã¥ beregne gjennomsnittet, legg til fÃ¸lgende kode:

    ```python
    price = (pumpkins['Low Price'] + pumpkins['High Price']) / 2

    month = pd.DatetimeIndex(pumpkins['Date']).month

    ```

   âœ… Du kan gjerne skrive ut data du Ã¸nsker Ã¥ sjekke ved Ã¥ bruke `print(month)`.

2. Kopier deretter de konverterte dataene til en ny Pandas dataframe:

    ```python
    new_pumpkins = pd.DataFrame({'Month': month, 'Package': pumpkins['Package'], 'Low Price': pumpkins['Low Price'],'High Price': pumpkins['High Price'], 'Price': price})
    ```

    Hvis du skriver ut dataframen din, vil du se et rent og ryddig datasett som du kan bruke til Ã¥ bygge din nye regresjonsmodell.

### Men vent! Det er noe merkelig her

Hvis du ser pÃ¥ kolonnen `Package`, blir gresskar solgt i mange forskjellige konfigurasjoner. Noen blir solgt i '1 1/9 bushel'-mÃ¥l, og noen i '1/2 bushel'-mÃ¥l, noen per gresskar, noen per pund, og noen i store bokser med varierende bredder.

> Gresskar virker veldig vanskelig Ã¥ veie konsekvent

NÃ¥r du graver i de originale dataene, er det interessant at alt med `Unit of Sale` lik 'EACH' eller 'PER BIN' ogsÃ¥ har `Package`-typen per tomme, per bin, eller 'each'. Gresskar virker veldig vanskelig Ã¥ veie konsekvent, sÃ¥ la oss filtrere dem ved Ã¥ velge kun gresskar med strengen 'bushel' i kolonnen `Package`.

1. Legg til et filter Ã¸verst i filen, under den opprinnelige .csv-importen:

    ```python
    pumpkins = pumpkins[pumpkins['Package'].str.contains('bushel', case=True, regex=True)]
    ```

    Hvis du skriver ut dataene nÃ¥, kan du se at du kun fÃ¥r de 415 eller sÃ¥ radene med data som inneholder gresskar per bushel.

### Men vent! Det er Ã©n ting til Ã¥ gjÃ¸re

La du merke til at bushel-mengden varierer per rad? Du mÃ¥ normalisere prisingen slik at du viser prisen per bushel, sÃ¥ gjÃ¸r litt matematikk for Ã¥ standardisere det.

1. Legg til disse linjene etter blokken som oppretter new_pumpkins-dataframen:

    ```python
    new_pumpkins.loc[new_pumpkins['Package'].str.contains('1 1/9'), 'Price'] = price/(1 + 1/9)

    new_pumpkins.loc[new_pumpkins['Package'].str.contains('1/2'), 'Price'] = price/(1/2)
    ```

âœ… IfÃ¸lge [The Spruce Eats](https://www.thespruceeats.com/how-much-is-a-bushel-1389308), avhenger vekten av en bushel av typen produkt, siden det er et volummÃ¥l. "En bushel med tomater, for eksempel, skal veie 56 pund... Blader og grÃ¸nnsaker tar opp mer plass med mindre vekt, sÃ¥ en bushel med spinat er bare 20 pund." Det er ganske komplisert! La oss ikke bry oss med Ã¥ gjÃ¸re en bushel-til-pund-konvertering, og i stedet prise per bushel. All denne studien av bushels med gresskar viser imidlertid hvor viktig det er Ã¥ forstÃ¥ naturen til dataene dine!

NÃ¥ kan du analysere prisingen per enhet basert pÃ¥ deres bushel-mÃ¥l. Hvis du skriver ut dataene en gang til, kan du se hvordan det er standardisert.

âœ… La du merke til at gresskar som selges per halv-bushel er veldig dyre? Kan du finne ut hvorfor? Hint: smÃ¥ gresskar er mye dyrere enn store, sannsynligvis fordi det er sÃ¥ mange flere av dem per bushel, gitt det ubrukte rommet som tas opp av ett stort hullete pai-gresskar.

## Visualiseringsstrategier

En del av rollen til en dataforsker er Ã¥ demonstrere kvaliteten og naturen til dataene de jobber med. For Ã¥ gjÃ¸re dette lager de ofte interessante visualiseringer, eller diagrammer, grafer og tabeller, som viser ulike aspekter av dataene. PÃ¥ denne mÃ¥ten kan de visuelt vise relasjoner og mangler som ellers er vanskelig Ã¥ avdekke.

[![ML for nybegynnere - Hvordan visualisere data med Matplotlib](https://img.youtube.com/vi/SbUkxH6IJo0/0.jpg)](https://youtu.be/SbUkxH6IJo0 "ML for nybegynnere - Hvordan visualisere data med Matplotlib")

> ðŸŽ¥ Klikk pÃ¥ bildet over for en kort video som viser hvordan du visualiserer dataene for denne leksjonen.

Visualiseringer kan ogsÃ¥ hjelpe med Ã¥ avgjÃ¸re hvilken maskinlÃ¦ringsteknikk som er mest passende for dataene. Et spredningsdiagram som ser ut til Ã¥ fÃ¸lge en linje, for eksempel, indikerer at dataene er en god kandidat for en lineÃ¦r regresjonsÃ¸velse.

Et datavisualiseringsbibliotek som fungerer godt i Jupyter-notebooks er [Matplotlib](https://matplotlib.org/) (som du ogsÃ¥ sÃ¥ i forrige leksjon).

> FÃ¥ mer erfaring med datavisualisering i [disse opplÃ¦ringene](https://docs.microsoft.com/learn/modules/explore-analyze-data-with-python?WT.mc_id=academic-77952-leestott).

## Ã˜velse - eksperimenter med Matplotlib

PrÃ¸v Ã¥ lage noen grunnleggende diagrammer for Ã¥ vise den nye dataframen du nettopp opprettet. Hva ville et grunnleggende linjediagram vise?

1. Importer Matplotlib Ã¸verst i filen, under Pandas-importen:

    ```python
    import matplotlib.pyplot as plt
    ```

1. KjÃ¸r hele notebooken pÃ¥ nytt for Ã¥ oppdatere.
1. Nederst i notebooken, legg til en celle for Ã¥ plotte dataene som en boks:

    ```python
    price = new_pumpkins.Price
    month = new_pumpkins.Month
    plt.scatter(price, month)
    plt.show()
    ```

    ![Et spredningsdiagram som viser pris til mÃ¥ned-forhold](../../../../2-Regression/2-Data/images/scatterplot.png)

    Er dette et nyttig diagram? Overrasker noe ved det deg?

    Det er ikke spesielt nyttig, da alt det gjÃ¸r er Ã¥ vise dataene dine som en spredning av punkter i en gitt mÃ¥ned.

### GjÃ¸r det nyttig

For Ã¥ fÃ¥ diagrammer til Ã¥ vise nyttige data, mÃ¥ du vanligvis gruppere dataene pÃ¥ en eller annen mÃ¥te. La oss prÃ¸ve Ã¥ lage et diagram hvor y-aksen viser mÃ¥nedene og dataene demonstrerer distribusjonen av data.

1. Legg til en celle for Ã¥ lage et gruppert stolpediagram:

    ```python
    new_pumpkins.groupby(['Month'])['Price'].mean().plot(kind='bar')
    plt.ylabel("Pumpkin Price")
    ```

    ![Et stolpediagram som viser pris til mÃ¥ned-forhold](../../../../2-Regression/2-Data/images/barchart.png)

    Dette er en mer nyttig datavisualisering! Det ser ut til Ã¥ indikere at den hÃ¸yeste prisen for gresskar forekommer i september og oktober. Stemmer det med forventningene dine? Hvorfor eller hvorfor ikke?

---

## ðŸš€Utfordring

Utforsk de forskjellige typene visualiseringer som Matplotlib tilbyr. Hvilke typer er mest passende for regresjonsproblemer?

## [Quiz etter forelesning](https://ff-quizzes.netlify.app/en/ml/)

## Gjennomgang & Selvstudium

Ta en titt pÃ¥ de mange mÃ¥tene Ã¥ visualisere data pÃ¥. Lag en liste over de ulike bibliotekene som er tilgjengelige og noter hvilke som er best for gitte typer oppgaver, for eksempel 2D-visualiseringer vs. 3D-visualiseringer. Hva oppdager du?

## Oppgave

[Utforsk visualisering](assignment.md)

---

**Ansvarsfraskrivelse**:  
Dette dokumentet er oversatt ved hjelp av AI-oversettelsestjenesten [Co-op Translator](https://github.com/Azure/co-op-translator). Selv om vi tilstreber nÃ¸yaktighet, vennligst vÃ¦r oppmerksom pÃ¥ at automatiske oversettelser kan inneholde feil eller unÃ¸yaktigheter. Det originale dokumentet pÃ¥ sitt opprinnelige sprÃ¥k bÃ¸r anses som den autoritative kilden. For kritisk informasjon anbefales profesjonell menneskelig oversettelse. Vi er ikke ansvarlige for eventuelle misforstÃ¥elser eller feiltolkninger som oppstÃ¥r ved bruk av denne oversettelsen.